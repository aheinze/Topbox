/*
 * Topbox v1.0
 *
 */
(function(b){var c=null;b.topbox=c={box:null,options:{},persist:false,show:function(a,e){this.box&&this.clear();this.options=b.extend({title:false,closeOnEsc:true,theme:"default",height:"auto",width:"auto",speed:500,easing:"swing",buttons:false,beforeShow:function(){},beforeClose:function(){},onClose:function(){}},e);var d='<div class="topbox-window '+c.options.theme+'">';d+='<div class="topbox-closebutton"></div>';d+='<div class="topbox-title" style="display:none;"></div>';d+='<div class="topbox-content"><div class="topbox-innercontent"></div></div>';
d+='<div class="topbox-buttonsbar"><div class="topbox-buttons"></div></div>';d+="</div>";this.box=b(d);this.box.find(".topbox-closebutton").bind("click",function(){c.close()});if(this.options.buttons){var g=this.box.find(".topbox-buttons");b.each(this.options.buttons,function(f,h){b('<button type="button" class="topbox-button">'+f+"</button>").bind("click",function(i){i.preventDefault();h.apply(c)}).appendTo(g)})}else this.box.find(".topbox-buttonsbar").hide();c.options.height!="auto"&&this.box.find(".topbox-innercontent").css({height:c.options.height,
"overflow-y":"auto"});c.options.width!="auto"&&this.box.find(".topbox-innercontent").css({width:c.options.width,"overflow-x":"auto"});this.setContent(a).setTitle(this.options.title);this.options.beforeShow.apply(this);this.box.css({opacity:0,visibility:"hidden"}).appendTo("body").css({left:b(window).width()/2-c.box.width()/2,top:-1.5*c.box.height()}).css({visibility:"visible"}).animate({top:0,opacity:1},this.options.speed,this.options.easing);b(window).bind("resize.topbox",function(){c.box.css({left:b(window).width()/
2-c.box.width()/2})});this.options.closeOnEsc&&b(document).bind("keydown.topbox",function(f){if(f.keyCode===27){f.preventDefault();c.close()}});this.showOverlay();this.box.find(":input:first").length&&this.box.find(":input:first").focus();return this},close:function(){if(this.box){if(this.options.beforeClose.apply(this)===false)return this;this.overlay.fadeOut();this.box.animate({top:-1.5*c.box.height(),opacity:0},this.options.speed,this.options.easing,function(){c.clear()});this.options.onClose.apply(this);
return this}},confirm:function(a,e,d){d=b.extend({title:"Please confirm",buttons:{Ok:function(){e.apply(c)},Cancel:function(){this.close()}}},d);this.show(a,d)},alert:function(a,e){e=b.extend({title:"Alert",buttons:{Ok:function(){this.close()}}},e);this.show(a,e)},clear:function(){if(this.box){if(this.persist){this.persist.appendTo(this.persist.data("tb-persist-parent"));this.persist=false}this.box.remove();this.box=null;this.overlay&&this.overlay.hide();b(window).unbind("resize.topbox");b(document).unbind("keydown.topbox");
return this}},setTitle:function(a){if(this.box){a?this.box.find(".topbox-title").html(a).show():this.box.find(".topbox-title").html(a).hide();return this}},setContent:function(a){if(this.box){if(typeof a==="object"){a=a instanceof jQuery?a:b(a);if(a.parent().length){this.persist=a;this.persist.data("tb-persist-parent",a.parent())}}else a=typeof a==="string"||typeof a==="number"?b("<div></div>").html(a):b("<div></div>").html("SimpleModal Error: Unsupported data type: "+typeof a);a.appendTo(this.box.find(".topbox-innercontent").html(""));
return this}},showOverlay:function(){if(this.box){if(!this.overlay){b("#topbox-overlay").length||b("<div>").attr("id","topbox-overlay").css({top:0,left:0,position:"absolute"}).prependTo("body");this.overlay=b("#topbox-overlay")}this.overlay.css({width:b(document).width(),height:b(document).height()}).show()}}};b.fn.topbox=function(){var a=arguments,e=a[0]?a[0]:{};return this.each(function(){b.topbox.show(this,e)})}})(jQuery);